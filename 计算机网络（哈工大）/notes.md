# 计算机网络

## 第一周  计算机网络概述

### 1.1 基本概念

计算机网络 = 计算机技术 + 通信技术

信源 --> 发送设备 --> 信道 --> 接收设备 --> 信宿
                      ^
                      噪声

定义：计算机网络就是一组互联的（直连 -> 交换网络（交换节点：路由器或交换机））、自治的计算机集合

什么是Internet?

* 全球最大的互联网络
  * ISP(Internet Service Provider)：网络互联的“网络之网络”
    * 计算设备
    * 通信链路
    * 分组交换
* 为网络应用提供通信服务的通信基础设施
* 为网络应用提供应用编程接口（API）

协议是计算机网络有序运行的重要保证

网络协议是为进行网络中的数据交换而建立的规则、标准或约定。
协议三要素：

* 语法：数据与控制信息的结构或格式；信号电平
* 语义：
* 时序

协议规范了网络中所有信息发送和接收过程

### 1.2 计算机网络的结构

网络边缘

* 主机
* 网络应用

接入网络、物理介质

* 有线或无线链路
* 数字用户路线
  * 用户复用电话线路连接至中心局（dsl调制解调器的作用）
  * 独占
* 电缆网络（cable modem）
  * 各家庭共享至接入网络的电缆
* 机构接入网络
* 无线接入网络

网络核心

* 互联的路由器
* 网络之网络
* 关键功能：路由与转发

Internet结构

* 端系统通过接入ISP连接到Internet
  * ISP之间通过对等直连或IXP连接

### 1.3 网络核心

数据交换

* 电路交换
  * 三个阶段：建立连接、通信、释放连接
  * 独占资源
* 多路复用：链路/网络资源划分成“资源片”
  * 频分多路复用
  * 时分多路复用
  * 波分多路复用
  * 码分多路复用
* 数据交换
  * 报文交换
  * 分组交换：近似并行传输，中间路由器等需要的缓存空间小
  * 分组交换与电路交换

## 第二周 计算机网络概述

### 2.1 计算机网络性能

* 速率：又称数据率
* 带宽：最高数据率
* 延时/时延：
  * 节点处理延时：
    * 差错检测
    * 确定输出链路
  * 排队延时
  * 传输延时：L/R
    * L：分组长度
    * R：链路带宽
  * 传播延时：d/s
    * d：物理链路长度
    * s：信号传播速率
* 时延带宽积：传播时延 * 带宽  单位是bit，以比特为单位的链路长度
* 分组丢包：
  * 缓存满
  * 已满队列
  * 重发
* 吞吐率/量：端到端传送数据率，取决于瓶颈链路

### 2.2 计算机体系结构

* 协议数据单元：PDU
* 控制信息内容
  * 地址
  * 差错监测编码
  * 协议控制：如优先级、服务质量等
* 物理层功能：
  * 接口特性：机械特性、电子特性、功能特性、规程特性
  * 比特编码
  * 数据率
  * 比特同步
    * 时钟同步
  * 传输模式
    * 单工
    * 半双工
    * 全双工
* 数据链路层功能
  * 负责结点到结点数据传输
  * 组帧
  * 物理寻址
  * 流量控制：避免淹没接收端
  * 差错控制：检测并重传损坏或丢失帧，避免重复帧
  * 访问控制：在任意时刻决定哪一个设备拥有链路（物理介质）控制使用权
* 网络层功能：
  * 负责源主机到目的主机数据分组交付
    * 可能跨越多个网络
  * 逻辑寻址
    * 全局唯一逻辑地址
  * 路由
  * 分组转发
* 传输层的功能
  * 负责源-目的（端到端）（进程间）完整报文的传输
  * 分段与重组
  * SAP寻址
    * 确保将完整报文交给正确进程，如端口号
  * 连接控制
  * 流量控制
  * 差错控制
* 会话层功能
  * 对话控制
  * 同步
* 表示层
  * 数据表示转化
  * 数据的加密/解密
  * 数据的压缩/解压缩
* 应用层功能
  * 支持用户通过用户代理（如浏览器）或网络接口使用网络
  * 典型应用层服务
    * 文件传输（FTP）
    * 电子邮件(SMTP)
    * Web(HTTP)
* TCP/IP参考模型：IP over everything
  * 应用层
  * 传输层
  * 网际层
  * 网络接口层
* 5层参考模型
  * 应用层
  * 传输层
  * 网络层
  * 数据链路层
  * 物理层

## 第三周 网络应用（上）

### 3.2 网络应用的基本原理

* 网络应用体系结构
  * C/S结构：Web应用
  * P2P结构
  * 混合结构
* 网络应用进程通信
  * 不同主机上进程通信方式：Socket
  * 进程的标识符：IP地址+端口号
* 网络应用的需求与传输层服务
  * 可靠性
  * 带宽
  * 时延

### 3.3 Web应用

* Web与HTTP
  * www：网页；网页相互链接
  * 网页包含多个对象：html、图片、视频、脚本
  * 对象的寻址：URL
* HTTP协议
  * 非持久性连接HTTP
    * 每个TCP连接只允许传输一个对象
    * HTTP 1.0
  * 持久性连接HTTP
    * 每个TCP连接允许传输多个对象
    * HTTP 1.1默认使用此连接
  * HTTP消息格式
    * 请求消息
      * ASCII：人工可读
    * 响应消息
* Cookie技术
  * 网站为了辨别用户身份、进行session跟踪而存储在本地终端上的文件（加密）
  * Cookie的组件
    * 请求消息头部行
    * 响应消息头部行
    * 保存在客户端主机上的Cookie文件
    * Web服务端的后台数据库
* Web缓存/代理服务器技术
  * 在不访问服务器的前提下满足http请求

### 3.4 E-mail应用

* 构成组件
  * 邮件客户端
  * 邮件服务器
    * 邮箱：存储发给用户的E-mail
    * 消息队列：存储等待发送的E-mail
  * SMTP协议
    * 邮件服务器之间传递消息所使用的协议
    * 客户端：发送消息的服务器
    * 服务端：接受消息的服务器
    * 使用TCP传输
    * 端口25
    * 传输过程的3个阶段
      * 握手
      * 消息的传输
      * 关闭
    * 命令/响应交互模式
      * 命令：ASCII文本
      * 响应：状态代码和语句
    * E-mail消息只能包含7位ASCII码
    * 使用持久连接
* E-mail文本消息格式
  * MIME：多媒体邮件扩展
* 邮件访问协议：
  * POP：认证/授权和下载（客户端<->邮件服务器）
    * 认证过程
    * 事务阶段
    * 下载并删除模式
    * 下载并保持模式
    * 无状态
  * IMAP：更多功能，更复杂能够操纵服务器上存储的信息
  * HTTP：Web方式收邮件

### 3.5 DNS应用

* Internet上主机/路由器的识别问题
  * IP地址
  * 域名
* 域名和IP地址之间如何映射
* 域名解析系统
  * 应用层协议
  * 分层架构
* DNS服务
  * 域名向IP地址翻译
  * 主机别名
  * 邮件服务器别名
  * 负载均衡：Web服务器
* 根域名服务器
  * 本地无法解析是访问此服务器
* 顶级域名服务器
  * com, org,等顶级域名或国家级域名
* 权威域名服务器
* 本地域名服务器
* 迭代查询
  * 被查询服务器返回域名解析服务器名字
* 递归查询
  * 将域名解析的任务交给所联系的服务器